---
import Icon from './Icon.astro';
---
<!-- Dark mode script from https://jklakus.co.uk/ -->
<button id="themeToggle" class="theme-toggle">
  <Icon svg="theme" size="28"/>
</button>
  
  <script>
    const setToggleListener = () => {
      let toggleBtn = document.getElementById("themeToggle");
      const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");
  
        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      };
  
      toggleBtn?.addEventListener("click", handleToggleClick);
    };
  
    setToggleListener();
  
    document.addEventListener("astro:after-swap", setToggleListener);
  </script>
  